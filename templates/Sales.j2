{% extends "main.j2" %}

<title>{% block title %}Sales{% endblock %}</title>

  <header>
    {% block header %}
    <h1>Sales</h1>
    {% endblock %}
  </header>
  
  {% block body %}

  <h3>Subpages</h3>
  <ul>
    <li><a href="{{ url_for('createSale') }}">Add New Sale</a>
  </ul>

  <h3>Sales Search by Vin</h3>
  <form method='GET'>
    <input type="search" placeholder="Search..." name="searchTerm"/>
    <button type="submit">Search</button>
    <br>
    <a class="action" href="{{ url_for('Sales') }}">Clear Search Filter</a>    
  </form>
  
  <table class="u-full-width">
  <thead>
    <tr>
      <th>VIN</th>
      <th>Employee_Customer_ID</th>
      <th>Sale_Price</th>
      <th>Sale_Date</th>
      <th>Has Customer Paid?</th>
      <th>Update</th>
    </tr>
  </thead>
  <tbody>
  {% for sale in Sales %}
    <tr>
      <td>{{ sale['vin'] }}</td>
      <td>{{ sale['employee_customer_id'] }}</td>
      <td>{{ sale['sale_price'] }}</td>
      <td>{{ sale['sale_date'] }}</td>
      <td>
        {% if sale['has_customer_paid'] == 0 %}
          No
        {% else %}
          Yes
        {% endif %}
      </td>
      <td><a class="action" href="{{ url_for('updateSale', id=sale['sale_id']) }}">Edit</a></td>
    </tr>
  {% endfor %}
  </tbody>
</table>

  {% endblock %}
